# Парсер статей по тематике ИИ

Приложение для автоматического сбора статей, связанных с искусственным интеллектом, из различных источников (RSS-фиды, новостные сайты) и сохранения их в базе данных Supabase для дальнейшего анализа.

## Возможности

- Парсинг RSS-фидов из различных источников
- Фильтрация статей по тематике искусственного интеллекта
- Автоматическое определение тематики на основе ключевых слов
- Сохранение результатов в базе данных Supabase
- Периодический запуск через заданные интервалы времени
- Логирование всех операций для отслеживания и отладки
- Поддержка различных форматов RSS-фидов
- Специальные методы парсинга для проблемных источников

## Установка

### Необходимые зависимости

- Python 3.7 или выше
- pip для установки пакетов

### Установка на локальной машине

1. Клонировать репозиторий:
```bash
git clone https://github.com/NeuroAgents/article-parser.git
cd article-parser
```

2. Создать виртуальное окружение:
```bash
python -m venv venv
source venv/bin/activate   # На Linux/Mac
# или
venv\Scripts\activate      # На Windows
```

3. Установить зависимости:
```bash
pip install -r requirements.txt
```

4. Создать файл `.env` с настройками Supabase:
```
SUPABASE_URL=your_supabase_url
SUPABASE_KEY=your_supabase_key
```

### Установка на сервере

Для удобной установки на сервере используйте скрипт `setup_server.sh`:

```bash
# Запустить с правами администратора
sudo bash setup_server.sh
```

Скрипт выполнит следующие операции:
- Обновит систему
- Установит необходимые пакеты
- Создаст рабочую директорию
- Настроит виртуальное окружение Python
- Установит все зависимости
- Создаст службу systemd для работы в фоновом режиме
- Настроит логирование и ротацию логов

## Использование

### Запуск парсера

Для однократного запуска:
```bash
python article_parser.py once
```

Для периодического запуска (по умолчанию каждый час):
```bash
python article_parser.py
```

### Тестирование проблемных источников

Для проверки работы с проблемными источниками:
```bash
python test_problem_sources.py
```

### Запуск как службы (только на Linux)

После установки через `setup_server.sh`:

```bash
# Включить службу
sudo systemctl enable article-parser

# Запустить службу
sudo systemctl start article-parser

# Проверить статус
sudo systemctl status article-parser

# Посмотреть логи
sudo tail -f /var/log/article-parser.log
```

## Структура базы данных

Парсер создает таблицу `Links_articles` со следующей структурой:

- `id` - уникальный идентификатор (UUID)
- `url` - URL статьи (уникальный)
- `title` - заголовок статьи
- `source` - источник (название блога/сайта)
- `category` - категория (AI, ML и т.д.)
- `summary` - краткое содержание
- `published_date` - дата публикации
- `created_at` - дата добавления в базу
- `status` - статус обработки ('new', 'processed', и т.д.)

## Лицензия

MIT